<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>課題③</title>
  </head>
  <body>
    <h1>ToDoリスト</h1>
    <input type="radio" name="status" value="all" checked />すべて
    <input type="radio" name="status" value="working" />作業中
    <input type="radio" name="status" value="done" />完了
    <table>
      <thead>
        <tr>
          <th>ID</th>
          <th>コメント</th>
          <th>状態</th>
        </tr>
      </thead>
      <tbody id="table"></tbody>
    </table>
    <h2>新規タスクの追加</h2>
    <input type="text" name="task" id="comment" />
    <input type="button" id="add_task" value="追加" />
    <script>
      'use strict';

      const task_list = [];

      // 追加ボタン押下
      document.getElementById('add_task').addEventListener('click', () => {
        // 入力した内容を連想配列に追加
        const id = task_list.length;
        const comment = document.getElementById('comment').value;
        task_list.push({ id: id, comment: comment, status: '作業中' });

        // 入力した内容をテキストボックスから削除
        document.getElementById('comment').value = '';

        // 保存した内容をテーブルに出力
        const fragment = document.createDocumentFragment();
        task_list.forEach((task) => {
          const tr = document.createElement('tr');
          const td1 = document.createElement('td');
          td1.textContent = task.id;
          tr.appendChild(td1);

          const td2 = document.createElement('td');
          td2.textContent = task.comment;
          tr.appendChild(td2);

          const status_button = document.createElement('input');
          status_button.type = 'button';
          status_button.value = task.status;
          const td3 = document.createElement('td');
          td3.appendChild(status_button);
          tr.appendChild(td3);

          const del_button = document.createElement('input');
          del_button.type = 'button';
          del_button.value = '削除';
          const td4 = document.createElement('td');
          td4.appendChild(del_button);
          tr.appendChild(td4);
          fragment.appendChild(tr);
        });
        const table = document.getElementById('table');
        table.innerHTML = '';
        table.appendChild(fragment);
      });
    </script>
  </body>
</html>
